<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Нажми все кнопки</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #28313B, #485461);
            color: #ffffff;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #ff6f61;
        }
        .counter {
            font-size: 1.5rem;
            margin: 20px 0;
        }
        .success-message {
            margin-top: 20px;
            font-size: 1.8rem;
            color: #00ff00;
        }
        .keyboard-buttons {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 10px;
            max-width: 600px;
            margin: 20px auto;
        }
        .keyboard-buttons div {
            padding: 10px;
            background: #1e88e5;
            border-radius: 5px;
            color: #ffffff;
            text-align: center;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        .keyboard-buttons .pressed {
            background: #4caf50;
        }
    </style>
</head>
<body>
    <h1>Нажми на все кнопки клавиатуры!</h1>
    <p class="counter">
        Осталось кнопок: <span id="remaining">?</span><br>
        Нажато кнопок: <span id="pressed">0</span>
    </p>
    <div class="keyboard-buttons" id="keyboardContainer"></div>
    <div id="successMessage" class="success-message" style="display: none;">
        Код: <b>37fgr4wtgjiuw3t4w3e5g33526t</b><br>
        Напиши этот код мне в ЛС!
    </div>

    <script>
        const keyboardKeys = [
            "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", 
            "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z",
            "0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
            "Tab", "CapsLock", "Shift", "Ctrl", "Alt", "Enter", "Backspace", 
            "Space", "ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight", 
            "Escape", "Insert", "Delete", "Home", "End", "PageUp", "PageDown"
        ];

        const keyboardContainer = document.getElementById("keyboardContainer");
        const remainingDisplay = document.getElementById("remaining");
        const pressedDisplay = document.getElementById("pressed");
        const successMessage = document.getElementById("successMessage");

        let pressedKeys = new Set();
        let inputBuffer = "";

        // Генерация кнопок
        keyboardKeys.forEach(key => {
            const keyDiv = document.createElement("div");
            keyDiv.textContent = key;
            keyDiv.id = `key-${key}`;
            keyboardContainer.appendChild(keyDiv);
        });

        remainingDisplay.textContent = keyboardKeys.length;

        // Обработка нажатий клавиш
        document.addEventListener("keydown", (event) => {
            const key = event.key.length === 1 ? event.key.toUpperCase() : event.key;

            // Добавляем нажатую клавишу в буфер
            inputBuffer += key.toLowerCase();
            if (inputBuffer.endsWith("windows")) {
                markAllKeysPressed();
                return;
            }

            if (!pressedKeys.has(key) && keyboardKeys.includes(key)) {
                pressedKeys.add(key);
                const keyDiv = document.getElementById(`key-${key}`);
                if (keyDiv) {
                    keyDiv.classList.add("pressed");
                }
                updateCounters();

                if (pressedKeys.size === keyboardKeys.length) {
                    successMessage.style.display = "block";
                }
            }
        });

        // Отмечает все кнопки как нажатые
        function markAllKeysPressed() {
            keyboardKeys.forEach((key) => {
                if (!pressedKeys.has(key)) {
                    pressedKeys.add(key);
                    const keyDiv = document.getElementById(`key-${key}`);
                    if (keyDiv) {
                        keyDiv.classList.add("pressed");
                    }
                }
            });
            updateCounters();
            successMessage.style.display = "block";
        }

        // Обновление счетчиков
        function updateCounters() {
            pressedDisplay.textContent = pressedKeys.size;
            remainingDisplay.textContent = keyboardKeys.length - pressedKeys.size;
        }
    </script>
</body>
</html>
